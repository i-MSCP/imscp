ispCP ω (OMEGA) HowTo Install for Fedora Core 9
================================================================================
For other Linux distributions please check the other INSTALL files.
================================================================================

Table of Content
================
1) Version Info
2) Requirements
3) Introduction
4) Installation
5) Update
6) FAQ
7) Credits

================================================================================
1) Version Info
---------------
ispCP ω Version:	1.0.0 RC6
INSTALL Script:		1.0
Maintainer:
Homepage:			http://isp-contol.net
Linux Distros:		Fedora Core 9

================================================================================
2) Requirements
---------------
There is no must have for a system using ispCP ω. This is only a recommendation:

Pentium III or K6-4 with 500 MHz
512 MB RAM
100 MB disk space (only for install of ispCP ω)
Debian (or even any other *NIX-Distribution)

All required packages are listed in ./docs/fedora-packages

================================================================================
3) Introduction
---------------
ispCP ω delivers a complete hosting automation appliance by offering significant
security, total-cost-of-ownership, and performance advantages over competing
commercial solutions.

With ispCP ω you can configure your server and applications, create user with
domains with a few point-and-click operations that take less than a minute.
There is no limit to the number of resellers, users and domains that can be
created. The core of ispCP ω are 3 easy-to-use, web-based control panels. ispCP
provides graphic user interfaces for the administrators, resellers and users.

================================================================================
4) Installation
---------------
Make sure you are logged in as root and MySQL is running.

1. Untar or unzip the distribution files to a secure directory:
	# cd /root
	# tar xjvf ispcp-omega-1.0.0-RC6.tar.bz2

2. Change to the newly created directory:
	# cd ./ispcp-omega-1.0.0

3. Install the required modules from 'fedora-packages'
	# yum install `cat ./docs/Fedora/fedora-packages`

	# cpan2rpm -i http://search.cpan.org/CPAN/authors/id/P/PH/PHOENIX/Term-ReadPassword-0.07.tar.gz
	# wget -P /tmp/core http://hany.sk/mirror/fedora/releases/7/Everything/i386/os/Fedora/perl-Net-LibIDN-0.09-3.fc7.i386.rpm
	# rpm -i /tmp/core/perl-Net-LibIDN-0.09-3.fc7.i386.rpm

4. (optional) Check the ispcp.conf and adapt it to your requirements.
   An overview over the variables you can find in the FAQ on
   http://isp-control.net

5. Install Courier
	# cp -f ./courier*.rpm /usr/local/
	# cd /usr/local/

	# wget http://www.thatfleminggent.com/packages/fedora/7/i386/courier-authlib-0.59.3-1.fc7.mf.i386.rpm
	# wget http://www.thatfleminggent.com/packages/fedora/7/i386/courier-authlib-userdb-0.59.3-1.fc7.mf.i386.rpm
	# wget http://www.thatfleminggent.com/packages/fedora/7/i386/courier-imap-4.1.3-1.fc7.mf.i386.rpm

	# rpm -i courier-authlib-0.59.3-1.fc7.mf.i386.rpm
	# rpm -i courier-authlib-userdb-0.59.3-1.fc7.mf.i386.rpm
	# rpm -i courier-imap-4.1.3-1.fc7.mf.i386.rpm

	Create group and user with 3000 UID so ispCP doesn't cause conflicts with user
	# groupadd courier -g 3000
	# useradd -u 3000 -c 'Courier Mail Server' -d /dev/null -g courier -s /bin/false courier

6. Build the System by using make:
	# make -f Makefile.fedora install

6. Copy all the directories into your system (you may make backups)
	# cp -RLf /tmp/ispcp/* /
	# cp -Rv /tmp/ispcp/etc/init.d /etc/rc.d/
	# ln -s /etc/rc.d/init.d /etc/init.d

	# mkdir /var/mail/virtual

7. Bind setup
	# mv /var/named/data /var/named/data2
	# ln -s /var/named/chroot/var/named/data /var/named/data

	# mkdir /var/www/scoreboards

	* create sasl2 database:
	# touch /etc/sasldb2

8. Additional apache setup
	# echo 'include vhosts/*.conf' >> /etc/httpd/conf/httpd.conf

	# mkdir -p /var/spool/postfix/etc
	# cp /etc/sasldb2 /var/spool/postfix/etc/sasldb2

	# chown apache:apache /var/www/ispcp/gui/tools/webmail/data

9. Now it's time to set up the frontend. Change into the engine directory:
	# cd /var/www/ispcp/engine/setup

9a. Set the MySQL password, if not set:
	# mysqladmin -u root password YOUR_PASSWORD

10. Start the engine setup:
	# perl ispcp-setup
	(Be careful: the file /etc/named.conf must exist before you run the script.
	Otherwise setup will failed on trying to backup it!
	You can use the caching-nameserver package or the system-config-bind tool
	for create it or you can use touch!)

11. Install ispCP ω step-by-step

	If you get no error, all went good; if you get one, look at
	http://isp-control.net to solve the problem.

12. There is an error in some courier-versions. Courier won't stop, if you use
	/etc/init.d/courier-authdaemon stop, so change it:
	# nano /etc/ini.d/courier-authdaemon

	change: ${libexecdir}/authlib/authdaemon stop
	into:	killall authdaemond.plain

13. Modify some system values:
	# chmod 777 /var/www/ispcp/gui/phptmp

	* Install Daemon:
	# chmod +x /etc/init.d/ispcp
	# chkconfig --add ispcp
	# service ispcp start

14. Clean the temporary folders:
	# rm -R /tmp/ispcp

================================================================================
5) Update
---------
Make sure you are logged in as root and MySQL is running.

1. Untar or unzip the distribution files to a secure directory:
	# cd /root
	# tar xjvf ispcp-omega-1.0.0-RC6.tar.bz2

2. Change to the newly created directory:
	# cd ./ispcp-omega-1.0.0

3. Install the required modules from 'fedora-packages'
	# yum install `cat ./docs/Fedora/fedora-packages`

	# cpan2rpm -i http://search.cpan.org/CPAN/authors/id/P/PH/PHOENIX/Term-ReadPassword-0.07.tar.gz
	# wget -P /tmp/core http://hany.sk/mirror/fedora/releases/7/Everything/i386/os/Fedora/perl-Net-LibIDN-0.09-3.fc7.i386.rpm
	# rpm -i /tmp/core/perl-Net-LibIDN-0.09-3.fc7.i386.rpm

4. (optional) Check the ispcp.conf and adapt it to your requirements.
   An overview over the variables you can find in the FAQ on
   http://isp-control.net

5. Build the System by using make:
	# make -f Makefile.fedora install

6. Save key files
	# cp -v /var/www/ispcp/engine/ispcp-db-keys.pl /tmp/ispcp/var/www/ispcp/engine/
	# cp -v /var/www/ispcp/engine/messager/ispcp-db-keys.pl /tmp/ispcp/var/www/ispcp/engine/messager/
	# cp -v /var/www/ispcp/gui/include/ispcp-db-keys.php /tmp/ispcp/var/www/ispcp/gui/include/

   If updating from RC3 or higher:
	# cp -v /var/www/ispcp/gui/tools/pma/config.inc.php /tmp/ispcp/var/www/ispcp/gui/tools/pma/

7. Copy /usr and /var directories into your system (you may make backups)
	# cp -Rv /tmp/ispcp/usr/* /usr/
	# cp -Rv /tmp/ispcp/var/* /var/

8. Backup ispcp.conf and copy the /etc dircetory into your system (you may make backups):
	# mv -v /etc/ispcp/ispcp.conf /etc/ispcp/ispcp.old.conf
	# cp -Rv /tmp/ispcp/etc/* /etc/

9. Now it's time to update your installation. Change into the engine directory:
	# cd /var/www/ispcp/engine/setup

10. Start the engine update:
	# perl ispcp-update

11. Update ispCP ω step-by-step

	If you get no error, all went good; if you get one, look at
	http://isp-control.net to solve the problem.

12. Clean the temporary folders:
	# rm -fR /tmp/ispcp

================================================================================
6) FAQ
------

Please check http://isp-control.net for any questions not answered in this file.

================================================================================
7) Credits
----------

ispCP ω is a project of ispCP | isp Control Panel.
Please visit our site under http://isp-control.net for further information on
ispCP ω, ispCP and other themes.

We hope you enjoy using ispCP ω. If you like it, help us, to make it better. We
would be glad on any help provided!
