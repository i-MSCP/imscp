# vsftpd(8) configuration file - auto-generated by i-MSCP
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN

#
# General configuration
#

# When "listen" directive is enabled, vsftpd runs in standalone mode and
# listens on IPv4 sockets. This directive cannot be used in conjunction
# with the listen_ipv6 directive.
listen={IPV4_ONLY}

# This directive enables listening on IPv6 sockets. To listen on IPv4 and IPv6
# sockets, you must run two copies of vsftpd with two configuration files.
# This directive enables listening on IPv6 sockets. By default, listening
# on the IPv6 "any" address (::) will accept connections from both IPv6
# and IPv4 clients. It is not necessary to listen on *both* IPv4 and IPv6
# sockets. If you want that (perhaps because you want to listen on specific
# addresses) then you must run two copies of vsftpd with two configuration
# files.
# Make sure, that one of the listen options is commented !!
listen_ipv6={IPV6_SUPPORT}

# Please don't change this. Init scripts handle this.
background=NO

# Listen on the standard FTP port
listen_port=21

connect_from_port_20=YES

# Allow active mode (it is the default normally)
port_enable=YES

# Port used for active data connections
ftp_data_port=20

ftpd_banner={FTPD_BANNER}

# Directory messages
dirmessage_enable=NO

# Allow command such as `ps -ef | grep vsftpd`
setproctitle_enable=NO

# Support for UTF-8 fs
utf8_filesystem=YES

# Always show dot files
force_dot_files=YES

# Passive mode
pasv_enable={PASSV_ENABLE}
pasv_min_port={PASSV_MIN_PORT}
pasv_max_port={PASSV_MAX_PORT}

# Mitigate DoS attacks
max_clients={FTP_MAX_CLIENTS}
max_per_ip={MAX_PER_IP}

# Timeout parameters
idle_session_timeout=120
data_connection_timeout=600

# Enable STOR, DELE, RNFR, RNTO, MKD, RMD, APPE and SITE commands
write_enable=YES

# Enable ASCII uploads
ascii_upload_enable=YES

# Authentication service name
pam_service_name=vsftpd

# Per user configuration directory
user_config_dir={FTPD_USER_CONF_DIR}

# Default homedir for authenticated users
# Overridden in per_user configuration files
user_sub_token=$USER
local_root={USER_WEB_DIR}/$USER

# Traffic logging
dual_log_enable=YES
xferlog_enable=YES

#
## Anonymous FTP users configuration
#

# Disables anonymous users for security
anonymous_enable=NO
anon_upload_enable=NO
anon_mkdir_write_enable=NO
anon_other_write_enable=NO

#
## (virtual FTP users) configuration
#

# Enable local users (needed for virtual users)
local_enable=YES

# Activate virtual users
guest_enable=YES

# Umask
local_umask=027

# Make sure that virtual users are restricted to their homedir
chroot_local_user=YES

# Allow chroot to be writeable (needed for i-MSCP)
allow_writeable_chroot=YES

# Use privileges of local users
virtual_use_local_privs=YES

# Default guest username
# This user is used by the i-MSCP frontEnd only
guest_username={FRONTEND_USER_SYS_NAME}

# Maximum data transfer rate permitted, in bytes per second
local_max_rate={LOCAL_MAX_RATE}
